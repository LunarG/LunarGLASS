
Top IR:
; ModuleID = 'Glslang'

%outb = type { float, float, float, <3 x float> }
%outbna = type { i32, <4 x float> }
%outs = type { <4 x float> }

@outbname = external addrspace(3) constant %outb
@s = addrspace(4) global float 0.000000e+00
@outbnamena = external addrspace(3) constant %outbna
@i = addrspace(4) global i32 0
@outnames = external addrspace(3) constant %outs
@gl_LocalInvocationID = global <3 x i32> zeroinitializer
@iimg2Drgba = external addrspace(1) constant i32
@coord2D = addrspace(4) global <2 x i32> zeroinitializer
@img3Drgba = external addrspace(1) constant i32
@coord3D = addrspace(4) global <3 x i32> zeroinitializer
@uimgCube = external addrspace(1) constant i32
@img2DA = external addrspace(1) constant i32
@iimg2D = external addrspace(1) constant i32
@wimg2DA = external addrspace(1) constant i32
@wimg2D = external addrspace(1) constant i32
@ii2da = external addrspace(1) constant i32

define fastcc void @main() {
entry:
  %gl_WorkGroupSize = alloca <3 x i32>
  %uv = alloca <4 x i32>
  %v = alloca <4 x float>
  %iv = alloca <4 x i32>
  %outnames = alloca <4 x float>
  %outbname = alloca <3 x float>
  %outbnamena = alloca <4 x float>
  br label %mainBody

mainBody:                                         ; preds = %entry
  call void @llvm.gla.barrier()
  %0 = load float addrspace(4)* @s
  store float %0, float addrspace(3)* getelementptr inbounds (%outb addrspace(3)* @outbname, i32 0, i32 0), !gla.uniform !2
  %1 = load float addrspace(4)* @s
  %2 = load <4 x float>* %outbnamena
  %3 = insertelement <4 x float> undef, float %1, i32 0, !gla.precision !41
  %4 = insertelement <4 x float> %3, float %1, i32 1, !gla.precision !41
  %5 = insertelement <4 x float> %4, float %1, i32 2, !gla.precision !41
  %6 = insertelement <4 x float> %5, float %1, i32 3, !gla.precision !41
  store <4 x float> %6, <4 x float> addrspace(3)* getelementptr inbounds (%outbna addrspace(3)* @outbnamena, i32 0, i32 1), !gla.uniform !7
  %7 = load <3 x float> addrspace(3)* getelementptr (<3 x float> addrspace(3)* getelementptr inbounds (%outb addrspace(3)* @outbname, i32 0, i32 3), i32 18), !gla.uniform !2
  %s = extractelement <3 x float> %7, i32 0, !gla.precision !41
  store float %s, float addrspace(4)* @s
  %8 = load i32 addrspace(4)* @i
  %9 = load float addrspace(4)* @s
  %10 = load <3 x float>* %outbname
  %11 = insertelement <3 x float> undef, float %9, i32 0, !gla.precision !41
  %12 = insertelement <3 x float> %11, float %9, i32 1, !gla.precision !41
  %13 = insertelement <3 x float> %12, float %9, i32 2, !gla.precision !41
  %14 = getelementptr <3 x float> addrspace(3)* getelementptr inbounds (%outb addrspace(3)* @outbname, i32 0, i32 3), i32 %8
  store <3 x float> %13, <3 x float> addrspace(3)* %14, !gla.uniform !2
  %15 = load <3 x i32>* @gl_LocalInvocationID
  %16 = extractelement <3 x i32> %15, i32 0, !gla.precision !41
  %17 = load float addrspace(4)* @s
  %18 = load <4 x float>* %outnames
  %19 = insertelement <4 x float> undef, float %17, i32 0, !gla.precision !41
  %20 = insertelement <4 x float> %19, float %17, i32 1, !gla.precision !41
  %21 = insertelement <4 x float> %20, float %17, i32 2, !gla.precision !41
  %22 = insertelement <4 x float> %21, float %17, i32 3, !gla.precision !41
  %23 = getelementptr <4 x float> addrspace(3)* getelementptr inbounds (%outs addrspace(3)* @outnames, i32 0, i32 0), i32 %16
  store <4 x float> %22, <4 x float> addrspace(3)* %23, !gla.uniform !9
  %24 = load i32 addrspace(1)* @iimg2Drgba, !gla.uniform !11
  %25 = load <2 x i32> addrspace(4)* @coord2D
  %iv1 = call <4 x i32> @llvm.gla.imageLoad.v4i32.v2i32(i32 2, i32 %24, <2 x i32> %25), !gla.precision !41
  store <4 x i32> %iv1, <4 x i32>* %iv
  %26 = load i32 addrspace(1)* @img3Drgba, !gla.uniform !14
  %27 = load <3 x i32> addrspace(4)* @coord3D
  %v3 = call <4 x float> @llvm.gla.fImageLoad.v4f32.v3i32(i32 3, i32 %26, <3 x i32> %27), !gla.precision !41
  store <4 x float> %v3, <4 x float>* %v
  %28 = load i32 addrspace(1)* @uimgCube, !gla.uniform !17
  %29 = load <3 x i32> addrspace(4)* @coord3D
  %uv4 = call <4 x i32> @llvm.gla.imageLoad.v4i32.v3i32(i32 4, i32 %28, <3 x i32> %29), !gla.precision !41
  store <4 x i32> %uv4, <4 x i32>* %uv
  %30 = load i32 addrspace(1)* @img2DA, !gla.uniform !20
  %31 = load <3 x i32> addrspace(4)* @coord3D
  %v5 = call <4 x float> @llvm.gla.fImageLoad.v4f32.v3i32(i32 2, i32 %30, <3 x i32> %31), !gla.precision !41
  %32 = load <4 x float>* %v
  %v6 = fadd <4 x float> %32, %v5, !gla.precision !41
  store <4 x float> %v6, <4 x float>* %v
  %33 = load i32 addrspace(1)* @iimg2D, !gla.uniform !23
  %34 = load <2 x i32> addrspace(4)* @coord2D
  %35 = load <4 x i32>* %iv
  call void @llvm.gla.imageStoreI.v2i32(i32 2, i32 %33, <2 x i32> %34, <4 x i32> %35), !gla.precision !41
  %36 = load i32 addrspace(1)* @uimgCube, !gla.uniform !17
  %37 = load <3 x i32> addrspace(4)* @coord3D
  %38 = load <4 x i32>* %uv
  call void @llvm.gla.imageStoreI.v3i32(i32 4, i32 %36, <3 x i32> %37, <4 x i32> %38), !gla.precision !41
  %39 = load i32 addrspace(1)* @wimg2DA, !gla.uniform !26
  %40 = load <3 x i32> addrspace(4)* @coord3D
  %41 = load <4 x float>* %v
  call void @llvm.gla.imageStoreF.v3i32(i32 2, i32 %39, <3 x i32> %40, <4 x float> %41), !gla.precision !41
  %42 = load i32 addrspace(1)* @wimg2D, !gla.uniform !29
  %43 = load <2 x i32> addrspace(4)* @coord2D
  %44 = load <4 x float>* %v
  call void @llvm.gla.imageStoreF.v2i32(i32 2, i32 %42, <2 x i32> %43, <4 x float> %44), !gla.precision !41
  %45 = load <4 x float> addrspace(3)* getelementptr inbounds (%outbna addrspace(3)* @outbnamena, i32 0, i32 1), !gla.uniform !7
  %46 = insertelement <4 x float> %45, float 0x4008CCCCC0000000, i32 1
  %47 = insertelement <4 x float> %46, float 0x4008CCCCC0000000, i32 2
  store <4 x float> %47, <4 x float> addrspace(3)* getelementptr inbounds (%outbna addrspace(3)* @outbnamena, i32 0, i32 1), !gla.uniform !7
  %48 = call i32 @llvm.gla.arraylength.p3v3f32(<3 x float> addrspace(3)* getelementptr inbounds (%outb addrspace(3)* @outbname, i32 0, i32 3))
  store i32 %48, i32 addrspace(3)* getelementptr inbounds (%outbna addrspace(3)* @outbnamena, i32 0, i32 0), !gla.uniform !7
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %mainBody
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

; Function Attrs: nounwind
declare void @llvm.gla.barrier() #0

; Function Attrs: nounwind readonly
declare <4 x i32> @llvm.gla.imageLoad.v4i32.v2i32(i32, i32, <2 x i32>) #1

; Function Attrs: nounwind readonly
declare <4 x float> @llvm.gla.fImageLoad.v4f32.v3i32(i32, i32, <3 x i32>) #1

; Function Attrs: nounwind readonly
declare <4 x i32> @llvm.gla.imageLoad.v4i32.v3i32(i32, i32, <3 x i32>) #1

; Function Attrs: nounwind
declare void @llvm.gla.imageStoreI.v2i32(i32, i32, <2 x i32>, <4 x i32>) #0

; Function Attrs: nounwind
declare void @llvm.gla.imageStoreI.v3i32(i32, i32, <3 x i32>, <4 x i32>) #0

; Function Attrs: nounwind
declare void @llvm.gla.imageStoreF.v3i32(i32, i32, <3 x i32>, <4 x float>) #0

; Function Attrs: nounwind
declare void @llvm.gla.imageStoreF.v2i32(i32, i32, <2 x i32>, <4 x float>) #0

; Function Attrs: nounwind readnone
declare i32 @llvm.gla.arraylength.p3v3f32(<3 x float> addrspace(3)*) #2

attributes #0 = { nounwind }
attributes #1 = { nounwind readonly }
attributes #2 = { nounwind readnone }

!gla.localSize = !{!0}
!gla.entrypoint = !{!1}
!gla.uniforms = !{!2, !7, !9, !11, !14, !17, !20, !23, !26, !29, !32}
!gla.shared = !{!35, !36, !37, !38}
!gla.inputs = !{!39}
!gla.noStaticUse = !{!32}

!0 = !{i32 16, i32 32, i32 4}
!1 = !{!"main", i32 15}
!2 = !{!"outbname", i32 18, %outb* @outbname_typeProxy, !3, !4}
!3 = !{i32 6, i32 0, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!4 = !{!"outb", !3, !"f", !5, !"g", !5, !"h", !5, !"uns", !5}
!5 = !{!"", !6}
!6 = !{i32 0, i32 3, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!7 = !{!"outbnamena", i32 14, %outbna* @outbnamena_typeProxy, !3, !8}
!8 = !{!"outbna", !3, !"k", !5, !"na", !5}
!9 = !{!"outnames", i32 18, %outs* @outnames_typeProxy, !3, !10}
!10 = !{!"outs", !3, !"va", !5}
!11 = !{!"iimg2Drgba", i32 12, i32* @iimg2Drgba_typeProxy, !12}
!12 = !{i32 5, i32 3, i32 1024, !13, i32 -1, i32 0, i32 -1, i32 2, i32 -1}
!13 = !{i32 22, i32* @iimg2Drgba_typeProxy, i32 1, i1 false, i1 false, i32 1}
!14 = !{!"img3Drgba", i32 12, i32* @img3Drgba_typeProxy, !15}
!15 = !{i32 5, i32 3, i32 1024, !16, i32 -1, i32 0, i32 -1, i32 2, i32 -1}
!16 = !{i32 2, i32* @img3Drgba_typeProxy, i32 2, i1 false, i1 false, i32 0}
!17 = !{!"uimgCube", i32 12, i32* @uimgCube_typeProxy, !18}
!18 = !{i32 5, i32 3, i32 1024, !19, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!19 = !{i32 34, i32* @uimgCube_typeProxy, i32 3, i1 false, i1 false, i32 2}
!20 = !{!"img2DA", i32 12, i32* @img2DA_typeProxy, !21}
!21 = !{i32 5, i32 3, i32 1024, !22, i32 -1, i32 0, i32 -1, i32 2, i32 -1}
!22 = !{i32 6, i32* @img2DA_typeProxy, i32 1, i1 true, i1 false, i32 0}
!23 = !{!"iimg2D", i32 12, i32* @iimg2D_typeProxy, !24}
!24 = !{i32 5, i32 3, i32 1024, !25, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!25 = !{i32 25, i32* @iimg2D_typeProxy, i32 1, i1 false, i1 false, i32 1}
!26 = !{!"wimg2DA", i32 12, i32* @wimg2DA_typeProxy, !27}
!27 = !{i32 5, i32 3, i32 1024, !28, i32 -1, i32 0, i32 -1, i32 1, i32 -1}
!28 = !{i32 5, i32* @wimg2DA_typeProxy, i32 1, i1 true, i1 false, i32 0}
!29 = !{!"wimg2D", i32 12, i32* @wimg2D_typeProxy, !30}
!30 = !{i32 5, i32 3, i32 1024, !31, i32 -1, i32 0, i32 -1, i32 1, i32 -1}
!31 = !{i32 3, i32* @wimg2D_typeProxy, i32 1, i1 false, i1 false, i32 0}
!32 = !{!"ii2da", i32 12, i32* @ii2da_typeProxy, !33}
!33 = !{i32 5, i32 3, i32 1024, !34, i32 -1, i32 0, i32 -1, i32 1, i32 -1}
!34 = !{i32 1, i32* @ii2da_typeProxy, i32 1, i1 true, i1 false, i32 1}
!35 = !{float addrspace(4)* @s}
!36 = !{i32 addrspace(4)* @i}
!37 = !{<2 x i32> addrspace(4)* @coord2D}
!38 = !{<3 x i32> addrspace(4)* @coord3D}
!39 = !{!"gl_LocalInvocationID", i32 1, <3 x i32>* @gl_LocalInvocationID_typeProxy, !40}
!40 = !{i32 1, i32 3, i32 1024, null, i32 0, i32 4, i32 -1, i32 0, i32 -1}
!41 = !{i32 3}
