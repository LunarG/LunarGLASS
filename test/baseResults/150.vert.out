
Top IR:
; ModuleID = 'Glslang'

%gl_PerVertex = type { <4 x float>, float, [4 x float], <4 x float>, <4 x float>, <4 x float>, <4 x float>, <4 x float>, [1 x <4 x float>], float }
%s2 = type { i32, [4 x %s1] }
%s1 = type { i32, i32, [3 x <4 x float>] }

@"anon@0" = global %gl_PerVertex zeroinitializer
@iv4 = global <4 x float> zeroinitializer
@ps = external addrspace(2) constant float
@s2out = global %s2 zeroinitializer
@ui = external addrspace(2) constant i32
@gl_VertexID = global i32 0
@gl_InstanceID = global i32 0

define fastcc void @main() {
entry:
  %i = alloca i32
  br label %mainBody

mainBody:                                         ; preds = %entry
  %0 = load <4 x float>* @iv4
  store <4 x float> %0, <4 x float>* getelementptr inbounds (%gl_PerVertex* @"anon@0", i32 0, i32 0)
  %1 = load float addrspace(2)* @ps, !gla.uniform !37
  store float %1, float* getelementptr inbounds (%gl_PerVertex* @"anon@0", i32 0, i32 1)
  %2 = load <4 x float>* @iv4
  %3 = extractelement <4 x float> %2, i32 0
  store float %3, float* getelementptr inbounds (%gl_PerVertex* @"anon@0", i32 0, i32 2, i32 2)
  %4 = load i32* %i
  %5 = load float addrspace(2)* @ps, !gla.uniform !37
  %6 = getelementptr %s2* @s2out, i32 0, i32 1, i32 %4, i32 2, i32 2, i32 3
  store float %5, float* %6
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %mainBody
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

!gla.entrypoint = !{!0}
!gla.outputs = !{!1, !23}
!gla.inputs = !{!31, !33, !35}
!gla.uniforms = !{!37, !39}
!gla.noStaticUse = !{!39, !33, !35}

!0 = !{!"main", i32 15}
!1 = !{!"anon@0", i32 16, %gl_PerVertex* @"anon@0_typeProxy", !2, !"gl_PerVertex", !3, !5, !7, !9, !11, !13, !15, !17, !19, !21}
!2 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!3 = !{!"gl_Position", i32 8, <4 x float>* @gl_Position_typeProxy, !4, !""}
!4 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 9, i32 -1, i32 0, i32 -1}
!5 = !{!"gl_PointSize", i32 9, float* @gl_PointSize_typeProxy, !6, !""}
!6 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 10, i32 -1, i32 0, i32 -1}
!7 = !{!"gl_ClipDistance", i32 7, [4 x float]* @gl_ClipDistance_typeProxy, !8, !""}
!8 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 12, i32 -1, i32 0, i32 -1}
!9 = !{!"gl_ClipVertex", i32 10, <4 x float>* @gl_ClipVertex_typeProxy, !10, !""}
!10 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 11, i32 -1, i32 0, i32 -1}
!11 = !{!"gl_FrontColor", i32 7, <4 x float>* @gl_FrontColor_typeProxy, !12, !""}
!12 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 24, i32 -1, i32 0, i32 -1}
!13 = !{!"gl_BackColor", i32 7, <4 x float>* @gl_BackColor_typeProxy, !14, !""}
!14 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 25, i32 -1, i32 0, i32 -1}
!15 = !{!"gl_FrontSecondaryColor", i32 7, <4 x float>* @gl_FrontSecondaryColor_typeProxy, !16, !""}
!16 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 26, i32 -1, i32 0, i32 -1}
!17 = !{!"gl_BackSecondaryColor", i32 7, <4 x float>* @gl_BackSecondaryColor_typeProxy, !18, !""}
!18 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 27, i32 -1, i32 0, i32 -1}
!19 = !{!"gl_TexCoord", i32 7, [1 x <4 x float>]* @gl_TexCoord_typeProxy, !20, !""}
!20 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 28, i32 -1, i32 0, i32 -1}
!21 = !{!"gl_FogFragCoord", i32 7, float* @gl_FogFragCoord_typeProxy, !22, !""}
!22 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 29, i32 -1, i32 0, i32 -1}
!23 = !{!"s2out", i32 7, %s2* @s2out_typeProxy, !24, !"s2", !25, !26}
!24 = !{i32 4, i32 0, i32 1038, null, i32 1, i32 0, i32 -1, i32 0, i32 -1}
!25 = !{!"c", i32 0, i32* @c_typeProxy, !2, !""}
!26 = !{!"d", i32 0, [4 x %s1]* @d_typeProxy, !27, !"s1", !28, !29, !30}
!27 = !{i32 4, i32 0, i32 1024, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!28 = !{!"a", i32 0, i32* @a_typeProxy, !2, !""}
!29 = !{!"a2", i32 0, i32* @a2_typeProxy, !2, !""}
!30 = !{!"b", i32 0, [3 x <4 x float>]* @b_typeProxy, !2, !""}
!31 = !{!"iv4", i32 1, <4 x float>* @iv4_typeProxy, !32, !""}
!32 = !{i32 0, i32 0, i32 1037, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!33 = !{!"gl_VertexID", i32 2, i32* @gl_VertexID_typeProxy, !34, !""}
!34 = !{i32 0, i32 0, i32 1059, null, i32 0, i32 7, i32 -1, i32 0, i32 -1}
!35 = !{!"gl_InstanceID", i32 3, i32* @gl_InstanceID_typeProxy, !36, !""}
!36 = !{i32 0, i32 0, i32 1060, null, i32 0, i32 8, i32 -1, i32 0, i32 -1}
!37 = !{!"ps", i32 12, float* @ps_typeProxy, !38, !""}
!38 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!39 = !{!"ui", i32 12, i32* @ui_typeProxy, !38, !""}


Bottom IR:
; ModuleID = 'Glslang'
target datalayout = "e-p:32:32"

%gl_PerVertex = type { <4 x float>, float, [4 x float], <4 x float>, <4 x float>, <4 x float>, <4 x float>, <4 x float>, [1 x <4 x float>], float }
%s2 = type { i32, [4 x %s1] }
%s1 = type { i32, i32, [3 x <4 x float>] }

@"anon@0" = global %gl_PerVertex zeroinitializer
@iv4 = global <4 x float> zeroinitializer
@ps = external addrspace(2) constant float
@s2out = global %s2 zeroinitializer
@gl_VertexID = global i32 0
@gl_InstanceID = global i32 0

define fastcc void @main() {
entry:
  %0 = load <4 x float>* @iv4
  %gla_constGEP = getelementptr %gl_PerVertex* @"anon@0", i32 0, i32 0
  store <4 x float> %0, <4 x float>* %gla_constGEP
  %1 = load float addrspace(2)* @ps
  %gla_constGEP1 = getelementptr %gl_PerVertex* @"anon@0", i32 0, i32 1
  store float %1, float* %gla_constGEP1
  %2 = extractelement <4 x float> %0, i32 0
  %gla_constGEP2 = getelementptr %gl_PerVertex* @"anon@0", i32 0, i32 2, i32 2
  store float %2, float* %gla_constGEP2
  store float %1, float* getelementptr (%s2* @s2out, i32 0, i32 1, i32 undef, i32 2, i32 2, i32 3)
  br label %stage-epilogue

stage-epilogue:                                   ; preds = %entry
  br label %stage-exit

stage-exit:                                       ; preds = %stage-epilogue
  ret void
}

!gla.entrypoint = !{!0}
!gla.outputs = !{!1, !23}
!gla.inputs = !{!31, !33, !35}
!gla.uniforms = !{!37, !39}
!gla.noStaticUse = !{!39, !33, !35}

!0 = !{!"main", i32 15}
!1 = !{!"anon@0", i32 16, %gl_PerVertex* @"anon@0_typeProxy", !2, !"gl_PerVertex", !3, !5, !7, !9, !11, !13, !15, !17, !19, !21}
!2 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!3 = !{!"gl_Position", i32 8, <4 x float>* @gl_Position_typeProxy, !4, !""}
!4 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 9, i32 -1, i32 0, i32 -1}
!5 = !{!"gl_PointSize", i32 9, float* @gl_PointSize_typeProxy, !6, !""}
!6 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 10, i32 -1, i32 0, i32 -1}
!7 = !{!"gl_ClipDistance", i32 7, [4 x float]* @gl_ClipDistance_typeProxy, !8, !""}
!8 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 12, i32 -1, i32 0, i32 -1}
!9 = !{!"gl_ClipVertex", i32 10, <4 x float>* @gl_ClipVertex_typeProxy, !10, !""}
!10 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 11, i32 -1, i32 0, i32 -1}
!11 = !{!"gl_FrontColor", i32 7, <4 x float>* @gl_FrontColor_typeProxy, !12, !""}
!12 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 24, i32 -1, i32 0, i32 -1}
!13 = !{!"gl_BackColor", i32 7, <4 x float>* @gl_BackColor_typeProxy, !14, !""}
!14 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 25, i32 -1, i32 0, i32 -1}
!15 = !{!"gl_FrontSecondaryColor", i32 7, <4 x float>* @gl_FrontSecondaryColor_typeProxy, !16, !""}
!16 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 26, i32 -1, i32 0, i32 -1}
!17 = !{!"gl_BackSecondaryColor", i32 7, <4 x float>* @gl_BackSecondaryColor_typeProxy, !18, !""}
!18 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 27, i32 -1, i32 0, i32 -1}
!19 = !{!"gl_TexCoord", i32 7, [1 x <4 x float>]* @gl_TexCoord_typeProxy, !20, !""}
!20 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 28, i32 -1, i32 0, i32 -1}
!21 = !{!"gl_FogFragCoord", i32 7, float* @gl_FogFragCoord_typeProxy, !22, !""}
!22 = !{i32 0, i32 0, i32 1024, null, i32 0, i32 29, i32 -1, i32 0, i32 -1}
!23 = !{!"s2out", i32 7, %s2* @s2out_typeProxy, !24, !"s2", !25, !26}
!24 = !{i32 4, i32 0, i32 1038, null, i32 1, i32 0, i32 -1, i32 0, i32 -1}
!25 = !{!"c", i32 0, i32* @c_typeProxy, !2, !""}
!26 = !{!"d", i32 0, [4 x %s1]* @d_typeProxy, !27, !"s1", !28, !29, !30}
!27 = !{i32 4, i32 0, i32 1024, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!28 = !{!"a", i32 0, i32* @a_typeProxy, !2, !""}
!29 = !{!"a2", i32 0, i32* @a2_typeProxy, !2, !""}
!30 = !{!"b", i32 0, [3 x <4 x float>]* @b_typeProxy, !2, !""}
!31 = !{!"iv4", i32 1, <4 x float>* @iv4_typeProxy, !32, !""}
!32 = !{i32 0, i32 0, i32 1037, null, i32 0, i32 0, i32 -1, i32 0, i32 -1}
!33 = !{!"gl_VertexID", i32 2, i32* @gl_VertexID_typeProxy, !34, !""}
!34 = !{i32 0, i32 0, i32 1059, null, i32 0, i32 7, i32 -1, i32 0, i32 -1}
!35 = !{!"gl_InstanceID", i32 3, i32* @gl_InstanceID_typeProxy, !36, !""}
!36 = !{i32 0, i32 0, i32 1060, null, i32 0, i32 8, i32 -1, i32 0, i32 -1}
!37 = !{!"ps", i32 12, float* @ps_typeProxy, !38, !""}
!38 = !{i32 0, i32 0, i32 1024, null, i32 -1, i32 0, i32 -1, i32 0, i32 -1}
!39 = !{!"ui", i32 12, i32* @ui_typeProxy, !38, !""}
#version 150 core
// LunarGOO output
struct s1 {
	int a;
	int a2;
	vec4 b[3];
};
struct s2 {
	int c;
	s1 d[4];
};
uniform float ps;
uniform int ui;
in vec4 iv4;
out s2 s2out;

void main()
{
	gl_Position = iv4;
	gl_PointSize = ps;
	gl_ClipDistance[2] = iv4.x;
	s2out.d[0].b[2].w = ps;
	
}

